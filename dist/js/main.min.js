const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),burger=document.querySelector(".header__burger"),header=document.querySelector(".header");function getDay(){return["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][(new Date).getDay()]}body.addEventListener("click",(function(e){var t;t=".header__burger",e.target.closest(t)&&menu.forEach(e=>{e.classList.toggle("_active")})}));const thisDay=document.querySelectorAll(".this-day");thisDay.forEach(e=>{e.textContent=getDay()});const thisFullDate=document.querySelectorAll(".this-full-date");thisFullDate.forEach(e=>{let t=(new Date).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",timezone:"UTC"}).slice(0,-3);e.textContent=t});let fontSize=18,paddingRight=100,padding=130;const aside=document.querySelector(".aside"),asidePlace=document.querySelector(".main__aside-place"),wrapper=document.querySelector(".wrapper");let windowSize,resizeCheck={};function resizeCheckFunc(e,t,i){windowSize<=e&&(1==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&0!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!1,i()),windowSize>=e&&(0==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&1!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!0,t())}function resize(){windowSize=window.innerWidth,resizeCheckFunc(500,(function(){padding=130}),(function(){padding=70})),resizeCheckFunc(992,(function(){fontSize=18,paddingRight=100,wrapper.appendChild(aside)}),(function(){fontSize=14,paddingRight=30,asidePlace.appendChild(aside)}))}function randomInteger(e,t){let i=e+Math.random()*(t+1-e);return Math.floor(i)}function closedVacancies(){let e=[];for(let t=0;t<17;t++)e.push(randomInteger(50,250));const t={type:"bar",data:{labels:[0,25,50,75,100,125,150,175,200,225,250,275,300,325,350,375,400],datasets:[{label:"Vacancies by closing date",data:e,backgroundColor:"#2F80ED",borderRadius:35,borderSkipped:!1}]},options:{responsive:!0,animation:{duration:0},plugins:{legend:{display:!1}},scales:{y:{grid:{display:!1},border:{display:!1},title:{display:!0,text:"Количество закрытых вакансий",color:"#A3A3A3",font:{family:"'Poppins', sans-serif",size:14,weight:700}},ticks:{display:!1}},x:{display:!0,title:{display:!0,text:"Срок закрытия вакансии, дни",color:"#A3A3A3",align:"start",font:{family:"'Poppins', sans-serif",size:14,weight:"bold"},padding:{top:20,left:0,right:0,bottom:0}},ticks:{color:"#A3A3A3",font:{family:"'Poppins', sans-serif",size:14,weight:700}},grid:{display:!1},border:{display:!1}}}}};let i=document.querySelector("#closed-vacancies");i=i.getContext("2d"),new Chart(i,t)}function topRecruiters(){const e={id:"innerBarText",afterDatasetsDraw(e,t,i){const{ctx:n,data:a,chartArea:{left:o,right:r},scales:{x:d,y:l}}=e;n.save(),n.font=`bolder ${fontSize}px "Poppins", sans-serif`,n.fillStyle="#464255",Array.from(a.labels).forEach((t,i)=>{const r=e.getDatasetMeta(0).data[0].height;n.fillText(""+a.labels[i],o,l.getPixelForValue(i)-r),e.getDatasetMeta(0).data[0].width&&n.fillText(""+a.datasets[0].data[i],e.getDatasetMeta(0).data[i].width+15,l.getPixelForValue(i)+r/6)})}};const t={type:"bar",data:{labels:["Вася Иванов","Вася Иванов","Вася Иванов","Вася Иванов","Вася Иванов"],datasets:[{label:"Топ рекрутеров по закрытию вакансий",data:[18,13,12,10,8],backgroundColor:"#2F80ED",borderRadius:35,barPercentage:.4,borderWidth:1,borderColor:"#9B51E0",borderSkipped:!1}]},options:{responsive:!0,animation:{duration:0},layout:{padding:{right:paddingRight,top:30}},plugins:{legend:{display:!1},tooltip:{enabled:!1}},indexAxis:"y",scales:{y:{grid:{display:!1},border:{display:!1},ticks:{display:!1}},x:{display:!0,ticks:{color:"#A3A3A3",font:{family:"'Poppins', sans-serif",size:14,weight:700}},grid:{display:!1},border:{display:!1}}}},plugins:[e]};let i=document.querySelector("#top");i=i.getContext("2d");new Chart(i,t)}function traffic(){const e={id:"doughnutLabelsLine",afterDraw(e,i,n){const{ctx:a,chartArea:{top:o,bottom:r,left:d,right:l,width:s,height:c}}=e;e.data.datasets.forEach((i,n)=>{e.getDatasetMeta(n).data.forEach((e,n)=>{const{x:o,y:r}=e.tooltipPosition();if(0!=e.circumference){const d=function(){let e=0,i=[];for(let i=0;i<t.length;i++)e+=t[i];for(let n=0;n<t.length;n++)i.push(Math.round(t[n]/e*100));return i}(),l=window.innerWidth>500?100:40,u=s/2+l,p=c/2+l;let g=window.innerWidth>500?75:35,h=window.innerWidth>500?15:0;const y=o>=u?o+g:o-g,f=r>=p?r+h:r-h,b=r>=p?15:-15,m=r>=p?"top":"bottom";a.beginPath(),a.moveTo(o,r),a.lineTo(y,f),a.lineTo(y,f+b),a.strokeStyle=e.options.backgroundColor,a.lineWidth=2,a.stroke(),a.font=`bolder ${fontSize-3}px "Poppins", sans-serif`,a.fillStyle="#464255",a.fillText(`+${d[n]}% (${i.data[n]})`,y-40,"top"==m?f+35:f-30)}})})}};let t=[3404,4653,7976];const i={type:"doughnut",data:{labels:["Work.ua","grc.ua","Lheubt"],datasets:[{label:"Источник трафика",data:t,backgroundColor:["#F1E6B9","#AB54DB","#EF9A91"],hoverBackgroundColor:["#F1E6B9","#AB54DB","#EF9A91"],cutout:"75%",borderWidth:0,borderSkipped:!1}]},options:{layout:{padding:padding},animation:{duration:0},responsive:!0,plugins:{htmlLegend:{containerID:"legend-container"},legend:{display:!1},tooltip:{enabled:!1}}},plugins:[{id:"htmlLegend",afterUpdate(e,t,i){const n=((e,t)=>{const i=document.getElementById(t);let n=i.querySelector("ul");return n||(n=document.createElement("ul"),n.style.display="flex",n.style.flexDirection="row",n.style.margin=0,n.style.padding=0,i.appendChild(n)),n})(0,i.containerID);for(;n.firstChild;)n.firstChild.remove();e.options.plugins.legend.labels.generateLabels(e).forEach(t=>{const i=document.createElement("li");i.onclick=()=>{const{type:i}=e.config;"pie"===i||"doughnut"===i?e.toggleDataVisibility(t.index):e.setDatasetVisibility(t.datasetIndex,!e.isDatasetVisible(t.datasetIndex)),e.update()};const a=document.createElement("span");a.style.setProperty("--bg-color",t.fillStyle);const o=document.createElement("b");o.style.textDecoration=t.hidden?"line-through":"";const r=document.createTextNode(t.text);o.appendChild(r),i.appendChild(a),i.appendChild(o),n.appendChild(i)})}},e]};let n=document.querySelector("#traffic");n=n.getContext("2d"),new Chart(n,i)}resize(),window.onresize=resize,closedVacancies(),topRecruiters(),traffic();