const body=document.querySelector("body"),html=document.querySelector("html");let fontSize=17,paddingRight=100,padding=130;const aside=document.querySelector(".aside"),asidePlace=document.querySelector(".main__aside-place"),wrapper=document.querySelector(".wrapper");let windowSize,resizeCheck={};function resizeCheckFunc(e,t,n){windowSize<=e&&(1==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&0!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!1,n()),windowSize>=e&&(0==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&1!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!0,t())}function resize(){windowSize=window.innerWidth,resizeCheckFunc(500,(function(){padding=130}),(function(){padding=100})),resizeCheckFunc(992,(function(){fontSize=17,paddingRight=100,wrapper.appendChild(aside)}),(function(){fontSize=14,paddingRight=30,asidePlace.appendChild(aside)}))}function randomInteger(e,t){let n=e+Math.random()*(t+1-e);return Math.floor(n)}function getMaxOfArray(e){return Math.max.apply(null,e)}function closedVacancies(){let e=[];for(let t=0;t<17;t++)e.push(randomInteger(50,250));const t={type:"bar",data:{labels:[0,25,50,75,100,125,150,175,200,225,250,275,300,325,350,375,400],datasets:[{label:"Вакансии по сроку закрытия",data:e,backgroundColor:"#2F80ED",borderRadius:35,borderSkipped:!1}]},options:{responsive:!0,animation:{duration:0},legend:{display:!1},plugins:{legend:{display:!1}},scales:{yAxes:[{display:!1,grid:{display:!1},gridLines:{display:!1},ticks:{max:getMaxOfArray(e),min:0}}],xAxes:[{gridLines:{display:!1},ticks:{fontSize:fontSize-2,fontFamily:'"Poppins", sans-serif',max:getMaxOfArray(e),min:0}}]}}};let n=document.querySelector("#closed-vacancies");n=n.getContext("2d"),new Chart(n,t)}function topRecruiters(){const e={id:"innerBarText",afterDatasetsDraw:function(e,t,n){const i=e.ctx,a=e.data,o=e.chartArea.left,r=(e.chartArea.right,e.scales["x-axis-0"],e.scales["y-axis-0"]);i.save(),i.font="bolder "+fontSize+'px "Poppins", sans-serif',i.fillStyle="#464255";for(let t=0;t<a.labels.length;t++){const n=e.getDatasetMeta(0).data[0]._view.height;i.fillText(a.labels[t]+" ("+a.datasets[0].data[t]+")",o,r.getPixelForValue(t)-n-5)}}};let t=[20,18,16,14,10];const n={type:"horizontalBar",data:{labels:["Вася Иванов","Вася Иванов","Вася Иванов","Вася Иванов","Вася Иванов"],datasets:[{label:"Test",data:t,backgroundColor:"#2F80ED",borderRadius:35,barPercentage:.35,borderWidth:1,borderColor:"#9B51E0",borderSkipped:!1}]},options:{responsive:!0,animation:{duration:0},layout:{padding:{top:30}},legend:{display:!1},tooltips:{enabled:!1},plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{yAxes:[{display:!1,grid:{display:!1},gridLines:{display:!1},ticks:{max:getMaxOfArray(t),min:0}}],xAxes:[{gridLines:{display:!1},ticks:{max:getMaxOfArray(t),min:0}}]}},plugins:[e]};let i=document.querySelector("#top");i=i.getContext("2d");new Chart(i,n)}function traffic(){const e={id:"doughnutLabelsLine",afterDraw:function(e,n,i){const a=e.ctx,o=(e.chartArea.top,e.chartArea.bottom,e.chartArea.left,e.chartArea.right,e.controller.width),r=e.controller.height;e.data.datasets.forEach((function(n,i){e.getDatasetMeta(i).data.forEach((function(e,i){const l=e.tooltipPosition().x,d=e.tooltipPosition().y;if(0!=e.circumference){const e=function(){let e=0,n=[];for(let n=0;n<t.length;n++)e+=t[n];for(let i=0;i<t.length;i++)n.push(Math.round(t[i]/e*100));return n}();let s;s=window.innerWidth>500?100:40;const c=o/2,p=r/2;let u,g,h,f,y;u=window.innerWidth>600?95:45,g=window.innerWidth>500?15:0,h=l>=c?l+u:l-u,f=d>=p?d+g:d-g,y=d>=p?15:-15;const m=d>=p?"top":"bottom";a.beginPath(),a.moveTo(l,d),a.lineTo(h,f),a.lineTo(h,f+y),a.strokeStyle=n.backgroundColor[i],a.lineWidth=2,a.stroke(),a.font="bolder "+fontSize+'px "Poppins", sans-serif',a.fillStyle="#464255",a.fillText("+"+e[i]+"% ("+n.data[i]+")",h-50,"top"==m?f+35:f-30)}}))}))}};let t=[3404,4653,7976];const n={type:"doughnut",data:{labels:["Work.ua","grc.ua","Lheubt"],datasets:[{label:"Источник трафика",data:t,backgroundColor:["#F1E6B9","#AB54DB","#EF9A91"],hoverBackgroundColor:["#F1E6B9","#AB54DB","#EF9A91"],cutout:"75%",borderWidth:0,borderSkipped:!1}]},options:{layout:{padding:padding},legend:{display:!1},legendCallback:function(e){var t=[];t.push("<ul>");for(var n=0;n<e.legend.legendItems.length;n++)console.log(e.legend.legendItems),t.push("<li>"),t.push('<span style="background:'+e.legend.legendItems[n].fillStyle+'"></span>'),t.push("<p>"+e.legend.legendItems[n].text+"</p>"),t.push("</li>");return t.push("</ul>"),t.join("")},animation:{duration:0},responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[e]};let i=document.querySelector("#traffic");i=i.getContext("2d");const a=new Chart(i,n);document.getElementById("legend-container").innerHTML=a.generateLegend()}resize(),window.onresize=resize,closedVacancies(),topRecruiters(),traffic();